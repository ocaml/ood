let render_workflow_link (slug_of_workflow : Ood.Workflow.t -> string) (workflow : Ood.Workflow.t) =
  let open Ood.Workflow in
  let slug = slug_of_workflow workflow in
  let href = "/workflows/" ^ slug in
  <a href=<%s href %>
    class="group flex items-center px-3 py-2 text-sm font-medium text-gray-600 rounded-md hover:text-gray-900 hover:bg-gray-50">
    <span class="truncate">
      <%s workflow.title %>
    </span>
  </a>

let render_nav (slug_of_workflow : Ood.Workflow.t -> string) workflows =
  <section class="lg:col-span-1">
    <nav aria-label="Sidebar">
        <h3 class="px-3 text-xs font-semibold text-gray-500 uppercase tracking-wider">
          Workflows
        </h3>
        <div class="mt-1 space-y-1" aria-labelledby="projects-headline">
          <%s! List.map (render_workflow_link slug_of_workflow) workflows |> String.concat "" %>
        </div>
    </nav>
  </section>

let render (slug_of_workflow : Ood.Workflow.t -> string) workflows (workflow : Ood.Workflow.t) =
  let open Ood.Workflow in
  <%s! Header_section_template.render "Workflows" %>
  <div
    class="mt-8 max-w-3xl mx-auto grid grid-cols-1 gap-6 sm:px-6 lg:max-w-7xl lg:grid-flow-col-dense lg:grid-cols-4 pb-8">
    <%s! render_nav slug_of_workflow workflows %>

    <section class="lg:col-start-2 lg:col-span-3">
      <div class="bg-white shadow sm:rounded-lg">
        <div class="px-4 py-5 sm:px-6">
          <h2 id="applicant-information-title" class="text-lg leading-6 font-medium text-gray-900">
            <%s workflow.title %>
          </h2>
        </div>
        <div class="border-t border-gray-200 px-4 py-5 sm:px-6">
          <div class="prose prose-indigo prose-md text-gray-500 max-w-full">
            <%s! workflow.body_html %>
          </div>
        </div>
      </div>
    </section>
  </div>
